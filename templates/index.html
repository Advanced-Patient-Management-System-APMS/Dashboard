<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>병원 대시보드</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
  
    <style>

        body {
            background-color: #f4f7f9;
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* 스타일 부분은 그대로 유지 */
        .floor-btn { cursor: pointer; width: 120px; display: inline-block; padding: 8px 0; background-color: #007bff; color: white; text-align: center; font-weight: 600; font-size: 17px; border-radius: 3px; margin-right: 4px; }
        .floor-btn.active { background-color: #0056b3; }
        .container-custom { max-width: 800px; margin: 30px auto; }
        .room-box { cursor: pointer; background-color: #00b7ff; color: white; margin: 15px; padding: 20px; text-align: center; font-weight: bold; border-radius: 5px; display: flex; align-items: center; justify-content: center; width: 150px; height: 100px; }
        .bed-box { background-color: #4CAF50; color: white; padding: 15px; margin: 10px; border-radius: 5px; text-align: center; }
    
        .header-logo {
            position: fixed;   /* 화면에 고정 */
            top: 25px;         /* 위에서 25px 떨어진 곳 */
            right: 30px;       /* 오른쪽에서 30px 떨어진 곳 */
            width: 180px;      /* 로고 너비 (원하는 크기로 조절) */
            z-index: 1000;     /* 다른 요소들보다 항상 위에 있도록 설정 */
        }
        .room-box:hover {
            transform: translateY(-5px);
            border-color: #4a90e2;
            background-color: #87b9e9;
            box-shadow: 0 6px 15px rgba(74, 144, 226, 0.2);
        }
    </style>
    
</head>
<body>

<img src="{{ url_for('static', filename='ajou_hospital.jpg') }}" alt="아주대병원 로고" class="header-logo">

<div class="container container-custom">
    <div id="floor-view">
        <div id="tabs">
            <div class="floor-btn active" data-floor="1">1층</div>
            <div class="floor-btn" data-floor="2">2층</div>
            <div class="floor-btn" data-floor="3">3층</div>
        </div>
        <div id="rooms-area" class="border rounded mt-2 p-2">
            </div>
    </div>

    <div id="beds-area" style="display: none;">
        </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
// ▼▼▼ [최종] JavaScript 코드 ▼▼▼
$(function() {
    function loadFloorRooms(floor) {
        $.get('/api/floor_rooms/' + floor, function(html) {
            $('#rooms-area').html(html);
        });
    }
    loadFloorRooms(1); // 초기 1층 로드

    $('#tabs').on('click', '.floor-btn', function() {
        $('.floor-btn').removeClass('active');
        $(this).addClass('active');
        loadFloorRooms($(this).data('floor'));
    });

    // 방 클릭 시: 방 목록 숨기고 침대 목록 보여주기
    $(document).on('click', '.room-box', function() {
        var room = $(this).data('room');
        $.get('/api/room_beds/' + room, function(html) {
            $('.header-logo').hide(); // [추가] 로고를 숨깁니다.
            $('#floor-view').hide();
            $('#beds-area').html(html).show();
        });
    });

    // '뒤로가기' 버튼 클릭 시: 침대 목록 숨기고 방 목록 보여주기
    $(document).on('click', '#back-to-rooms', function(e) {
        e.preventDefault();
        $('.header-logo').show(); // [추가] 숨겼던 로고를 다시 보여줍니다.
        $('#beds-area').hide().html('');
        $('#floor-view').show();
    });
});
</script>

</body>
</html>